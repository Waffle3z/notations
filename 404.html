<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv='cache-control' content='no-cache'> 
	<meta http-equiv='expires' content='0'> 
	<meta http-equiv='pragma' content='no-cache'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script>
		(function loadStyles() {
			var segments = window.location.pathname.split('/').filter(Boolean);
			var head = document.getElementsByTagName('head')[0];
			function add(href) {
				var link = document.createElement('link');
				link.rel = 'stylesheet';
				link.href = href;
				link.onerror = function() {
					// fallback to project page prefix if root fails
					var alt = '/' + (segments[0] || '') + '/styles.css';
					if (link.href !== window.location.origin + alt) {
						link.href = alt;
					}
				};
				head.appendChild(link);
			}
			add('/styles.css');
		})();
	</script>
</head>
<body>
	<script>
		(function() {
			var segments = window.location.pathname.split('/').filter(Boolean);
			var params = new URLSearchParams(window.location.search);
			var notationDir = params.get('notation');
			if (!notationDir) {
				var last = segments[segments.length - 1] || '';
				if (last === '' || /\.[a-zA-Z0-9]+$/.test(last)) {
					notationDir = decodeURIComponent(segments[segments.length - 2] || 'worm');
				} else {
					notationDir = decodeURIComponent(last);
				}
			}
			var encodedNotation = encodeURIComponent(notationDir);

			function addScript(src, onerrorSrc, cb) {
				var s = document.createElement('script');
				s.async = false;
				s.src = src;
				s.onerror = function() {
					if (onerrorSrc && s.src !== onerrorSrc) {
						s.remove();
						addScript(onerrorSrc, null, cb);
					}
				};
				s.onload = function() { if (cb) cb(); };
				document.body.appendChild(s);
			}

			// Load notation first, then main.js
			addScript('/' + encodedNotation + '/notation.js', '/' + (segments[0] || '') + '/' + encodedNotation + '/notation.js', function() {
				addScript('/main.js', '/' + (segments[0] || '') + '/main.js');
			});
		})();
	</script>
</body>
</html>